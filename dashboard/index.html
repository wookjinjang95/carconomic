<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width = device-width, initial-scale=1">
        <!-- Below is the google font-->
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Titillium+Web&display=swap" rel="stylesheet">
        <!-- Below is the bootstrap tool-->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
        <!-- End of Bootstrap tool -->
        <link rel="stylesheet" href="../css/product.css">
        <link rel="stylesheet" href="../css/product_resp.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.css">
        <script src="https://d3js.org/d3.v6.min.js"></script>
        <script src="../js/price_depreciation.js"></script>
        <script type ="text/javascript" src ="../js/jquery.js"></script>
        <script type="text/javascript" src="../js/utils.js"></script>
        <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.js"></script>
        <script data-ad-client="ca-pub-5276442463136491" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <title>Carconomic Dashboard</title>
        <link rel="icon" href="../photos/icon/AIFA_icon.png">
    </head>
    <body style="background-color: rgb(231, 231, 231);">
        <nav class="navbar fixed-top navbar-expand-lg navbar-light" style="background-color: #33334d">
            <a class="navbar-brand" href="../index.html" style="margin-left:30; color: white;">
                <img src="../photos/icon/AIFA_icon.png" width="30" height="30" class="d-inline-block align-top" alt="">
                Carconomic
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsed_menu">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="collapsed_menu">
                <ul class="navbar-nav">
                  <li class="nav-item">
                    <a class="nav-link" style="margin-right: 15px; color: white;" href="http://www.carconomic.com">Home</a>
                  </li>
                  <li class="nav-item active">
                    <a class="nav-link" style="margin-right: 15px; color: white;" href="http://www.carconomic.com/dashboard/">Dashboard</a>
                  </li>
                  <li>
                      <a class="nav-link" style="margin-right: 15px; color: white;" href="../tutorial.html">Tutorial</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" style="margin-right: 15px; color: white;" href="../about_us.html">About Us</a>
                  </li>
                </ul>
            </div>
        </nav>
        <div class="container-lg" id="main_body">
          <div class="dashboard">
            <div class="row">
              <div class="col">
                <label for="make">Choose a brand: </label>
                <select class="form-select" name="make" id="make" onchange="update_search_selection();">
                  <option value="tesla">Tesla</option>
                  <option value="bmw">BMW</option>
                  <option value="lamborghini">Lamborghini</option>
                  <option value="lexus">Lexus</option>
                  <option value="chevrolet">Chevrolet</option>
                  <option value="mclaren">Mclaren</option>
                  <option value="porsche">Porsche</option>
                  <option value="ford">Ford</option>
                  <option value="ferrari">Ferrari</option>
                </select>
              </div>
              <div class="col">
                <label for="model">Choose a model: </label>
                <select class="form-select" name="model" id="model" onchange="update_year_selection();"></select>
              </div>
              <div class="col">
                <label for="year">Select Year:</label>
                <select class="form-select" name="year" id="year">
                  <option value="all">all</option>
                </select>
              </div>
              <div class="d-flex justify-content-center">
                <button onclick="alert_no_data()" class="front_btn">Search</button>
              </div>
            </div>
  
            <div style="padding-top: 30px;">
              <div><i>*Unspecified = Base model or not specified from owner</i></div>
              <div class="dash_graph">
                  <div class="dash_title">Market Report</div>
                  <div style="float: left"><i>Data Updated Lastly: 06-14-2021</i></div>
                  <div id="trim_list" style="overflow-x: hidden; overflow-y: auto; width: 100%; height: 25px; padding-left: 40px;"></div>
                  <div id="general_depreciation" style="height: 100%; width: 107%;"></div>
              </div>
              <div class="trim_total_info">
                <div class="trim_dash_title">Total Number of Vehicles Per Trim</div>
              </div>
              <div class="analyze_value">
                <div class="dash_title" style="margin-bottom: 2%;">Check Price</div>
                <p style="padding: 20px;">
                  Give us trim of the vehicle, current price that you saw, and finally the mileage.
                  With these given inputs, Carconomic analyzer can check whether the price you are 
                  currently looking at is a good price or not. We can also predict how much will it 
                  cost to own the vehicle.
                </p>
                <div class="row">
                  <div class="col">
                    <p style="color: red; padding-left: 5%;"><i>Please select trim</i></p>
                  </div>
                  <div class="col">
                    <p style="color: red"><i>What is the current price of the vehicle you are looking into?</i></p>
                  </div>
                  <div class="col">
                    <p style="color: red"><i>What is the current mileage of the vehicle?</i></p>
                  </div>
                </div>
                <div class="row">
                  <div class="col">
                    <label for="select_trim" style="padding-left: 5%;">Choose the Trim: </label>
                    <select class="form-select" style="display: inline-block" name="select_trim" id="select_trim"></select>
                  </div>
                  <div class="col">
                    <label for="Price" style="padding-left: 5%;">Current Price ($): </label>
                    <input type="text" id="price_text" name="price_text">
                  </div>
                  <div class="col">
                    <label for="Price" style="padding-left: 5%;">Current Mileage (mi): </label>
                    <input type="text" id="mileage_text" name="mileage_text">
                  </div>
                </div>
                <p id="report" style="padding: 20px;"></p>
                <div class="row" style="padding-bottom: 3%;">
                  <div class="col d-flex justify-content-center">
                    <button onclick="generate_report()" class="btn btn-primary" style="background-color: #33334d">Generate Report</button>
                  </div>
                  <div class="col d-flex justify-content-center">
                    <button onclick="clear_report()" class="btn btn-primary" style="background-color: #33334d">Clear Report</button>
                  </div>
                </div>
              </div>
              <div class="cost_analysis_container">
                <div style="margin-left: 10px;"><i>Data Updated Lastly: 06-14-2021</i></div>
                <div class="dash_title">Depreciation Cost Analysis</div>
                <div id="cost_trim_list" style="overflow-x: hidden; overflow-y: auto; width: 100%; height: 25px; padding-left: 40px;"></div>
                <div id="cost_analysis"></div>
              </div>
              <div class="trim_in_states">
                <div style="margin-left: 10px;"><i>Data Updated Lastly: 06-14-2021</i></div>
                <div class="dash_title">Num of Vehicles in Each State</div>
              </div>
              <div class="raw_data_table_container">
                <div style="float: left; display: inline-block;"><i>*Please note that if carfax link is not working, there is a chance that vehicle is out of market.</i></div>
                <div id="data_date_updated" style="float: right; display: inline-block; margin-right: 10px; display: inline-block;"><i>Data Updated Lastly: 06-14-2021</i></div>
                <div class="dash_title" id="title_of_raw_table"></div>
              </div>
            </div>
          </div>
        </div>
        <!-- Vue.js script -->
        <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
        <!-- <script src="../js/dashboard_vue.js"></script> -->
        <!-- d3.js script -->
        <script src="../js/general_graph.js?n=1"></script>
        <script>
          window.onload = function(){
            var make = sessionStorage.getItem("make");
            if(make){
              $('#make').val(make);
            }
        
            var model = sessionStorage.getItem("model");
            (async function(){
                await update_model_list();
            })();
            if(model){
              $("#model").val(model);
            }

            var year = sessionStorage.getItem("year");
            (async function(){
                await update_year_selection();
            })();
            if(year){
              $("#year").val(year);
            }
            alert_no_data();
          };

          $('#make').change(function() { 
            sessionStorage.setItem("make", $(this).val());
          });
          $('#model').change(function() { 
            sessionStorage.setItem("model", $(this).val());
          });
          $('#year').change(function() { 
            sessionStorage.setItem("year", $(this).val());
          });
        </script>
    </body>
</html>